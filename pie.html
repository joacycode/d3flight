<!DOCTYPE html>
<html>
<head>
	<title>demo</title>
</head>
<body>
	<script src="/build/static/d3.min.js"></script>
	<script>	
		var dataset = [ 30 , 10 , 43 , 55 , 13 ];//原始数据							
		var svgHeight=500,svgwidth=800,outerRadius = 150,innerRadius = 0; //度量定义
		var piedata = d3.layout.pie()(dataset),//生成布局图数据
		 	color = d3.scale.category10();//颜色生成器
		//定义svg相关
		var svg=d3.select('body')
		    .append("div")
		    .attr('id', 'flightMap')
		    .append('svg')
		    .attr('width', svgwidth)
		    .attr('height', svgHeight)
		    .attr("transform", "translate(0,0)");

		//弧生成器
		var arc = d3.svg.arc() 
		    .innerRadius(innerRadius)   
		    .outerRadius(outerRadius);  

		//定义svg中g相关（位置、数据绑定）
		var arcG = svg.selectAll("g")
		    .data(piedata)
		    .enter()
		    .append("g")
		    .attr("transform","translate("+ (svgwidth/2) +","+ (svgHeight/2) +")");

		//arcG同时选择了5个g元素进行append path
		arcG.append("path")
		.attr("fill",function(d,i){
			return color(i);
		})
		.attr("d",function(d){
			return arc(d);
		}) 

		//文本 arc.centroid()弧中心
		arcG.append("text")
	    .attr("transform",function(d){
	        return "translate(" + arc.centroid(d) + ")";
	    })
	    .attr("text-anchor","middle")
	    .text(function(d){
	        return d.data;//布局过的数据不能直接调用d 因为它是一个对象
	    }); 

	    // arc.centroid()  d.data 
	</script>
</body>
</html>